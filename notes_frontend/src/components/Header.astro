---
/**
 * Header.astro - App header with brand and global actions
 */
---
<header class="header" role="banner">
  <div class="brand">
    <div class="brand-badge" aria-hidden="true"></div>
    <div>
      <div>Ocean Notes</div>
      <div class="text-muted" style="font-size:12px">Professional. Minimal. Fast.</div>
    </div>
  </div>
  <div class="flex gap-8">
    <label class="search" aria-label="Search notes">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M21 21l-4.3-4.3" stroke="#6b7280" stroke-width="2" stroke-linecap="round"/>
        <circle cx="11" cy="11" r="7" stroke="#6b7280" stroke-width="2"/>
      </svg>
      <input id="global-search" type="search" placeholder="Search notes..." autocomplete="off" />
      <span class="badge" aria-hidden="true">/</span>
    </label>
    <button class="btn btn-primary" id="add-note-btn" aria-label="Add note">
      + Add Note
    </button>
  </div>
</header>

<script>
  // Wire search and add callbacks via CustomEvents to parent script
  const search = document.getElementById('global-search');
  const addBtn = document.getElementById('add-note-btn');

  function dispatch(name, detail) {
    window.dispatchEvent(new CustomEvent(name, { detail }));
  }

  if (search) {
    search.addEventListener('input', (e) => {
      dispatch('notes:search', { q: e.target.value });
    });
    // Keyboard shortcut '/'
    window.addEventListener('keydown', (e) => {
      if (e.key === '/' && document.activeElement !== search) {
        e.preventDefault();
        search.focus();
      }
    });
  }

  if (addBtn) {
    addBtn.addEventListener('click', () => dispatch('notes:add', {}));
  }
</script>
